--------------------------------------------------------
-- Archivo creado  - lunes-julio-06-2020   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Sequence ACCIDENTE_ACCIDENTE
--------------------------------------------------------

   CREATE SEQUENCE  "ROOT"."ACCIDENTE_ACCIDENTE"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_PERSONA
--------------------------------------------------------

   CREATE SEQUENCE  "ROOT"."SEQ_PERSONA"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_ROLES
--------------------------------------------------------

   CREATE SEQUENCE  "ROOT"."SEQ_ROLES"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_TIPO
--------------------------------------------------------

   CREATE SEQUENCE  "ROOT"."SEQ_TIPO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQ_USUARIO
--------------------------------------------------------

   CREATE SEQUENCE  "ROOT"."SEQ_USUARIO"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Table PERSONA
--------------------------------------------------------

  CREATE TABLE "ROOT"."PERSONA" 
   (	"ID_PERSONA" NUMBER(*,0), 
	"NOMBRE" VARCHAR2(50 CHAR), 
	"APELLIDO" VARCHAR2(50 CHAR), 
	"EMAIL" VARCHAR2(120 CHAR), 
	"TELEFONO" VARCHAR2(50 CHAR), 
	"DIRECCION" VARCHAR2(50 CHAR), 
	"SISTEMA_PREVISION" VARCHAR2(20 CHAR), 
	"PERSONA_ACTIVACION" NUMBER(*,0) DEFAULT 1
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table REGISTRO_ACCIDENTE
--------------------------------------------------------

  CREATE TABLE "ROOT"."REGISTRO_ACCIDENTE" 
   (	"ID_REGISTRO_ACCIDENTE" NUMBER(*,0), 
	"FECHA_ACCIDENTE" DATE, 
	"CARGO_ACCIDENTADO" VARCHAR2(50 CHAR), 
	"DESCRIPCION" VARCHAR2(120 CHAR), 
	"USUARIO_ID_USUARIO" NUMBER(*,0), 
	"TIPO_ID_TIPO" NUMBER(*,0), 
	"PERSONA_ID_PERSONA" NUMBER(*,0), 
	"REGISTRO_ACCIDENTE_ACTIVACION" NUMBER(*,0) DEFAULT 1
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ROLES
--------------------------------------------------------

  CREATE TABLE "ROOT"."ROLES" 
   (	"ID_ROL" NUMBER(*,0), 
	"NOMBRE_ROL" VARCHAR2(50 CHAR), 
	"ROLES_ACTIVACION" NUMBER(*,0) DEFAULT 1
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table TIPO
--------------------------------------------------------

  CREATE TABLE "ROOT"."TIPO" 
   (	"ID_TIPO" NUMBER(*,0), 
	"NOMBRE_TIPO" VARCHAR2(50 CHAR), 
	"TIPO_ACTIVACION" NUMBER(*,0) DEFAULT 1
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table USUARIO
--------------------------------------------------------

  CREATE TABLE "ROOT"."USUARIO" 
   (	"ID_USUARIO" NUMBER(*,0), 
	"NOMBRE_USUARIO" VARCHAR2(50 CHAR), 
	"PASSWORD_USUARIO" VARCHAR2(50 CHAR), 
	"ROLES_ID_ROL" NUMBER(*,0), 
	"PERSONA_ID_PERSONA" NUMBER(*,0), 
	"USUARIO_ACTIVACION" NUMBER(*,0) DEFAULT 1
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into ROOT.PERSONA
SET DEFINE OFF;
Insert into ROOT.PERSONA (ID_PERSONA,NOMBRE,APELLIDO,EMAIL,TELEFONO,DIRECCION,SISTEMA_PREVISION,PERSONA_ACTIVACION) values ('1','René','Calfin','rene@gmail.com','954154254','LosRene 01868','ISAPRE','1');
Insert into ROOT.PERSONA (ID_PERSONA,NOMBRE,APELLIDO,EMAIL,TELEFONO,DIRECCION,SISTEMA_PREVISION,PERSONA_ACTIVACION) values ('2','José','Contreras','jose@gmail.com','987436985','LosJose 01471','ISAPRE','1');
Insert into ROOT.PERSONA (ID_PERSONA,NOMBRE,APELLIDO,EMAIL,TELEFONO,DIRECCION,SISTEMA_PREVISION,PERSONA_ACTIVACION) values ('3','Javier','Lagos','javier@gmail.com','976854124','LosJavier 2435','ISAPRE','1');
Insert into ROOT.PERSONA (ID_PERSONA,NOMBRE,APELLIDO,EMAIL,TELEFONO,DIRECCION,SISTEMA_PREVISION,PERSONA_ACTIVACION) values ('4','Carlos','M.','carlos@gmail.com','954712254','LosCarlos 12','ISAPRE','1');
Insert into ROOT.PERSONA (ID_PERSONA,NOMBRE,APELLIDO,EMAIL,TELEFONO,DIRECCION,SISTEMA_PREVISION,PERSONA_ACTIVACION) values ('5','Pepito','Poriqua','pepito@gmail.com','992125546','LosPepitos 1444','FONASA','1');
Insert into ROOT.PERSONA (ID_PERSONA,NOMBRE,APELLIDO,EMAIL,TELEFONO,DIRECCION,SISTEMA_PREVISION,PERSONA_ACTIVACION) values ('6','Pepita','Fuline','pepita@gmail.com','957412358','LosPepitas 5474','FONASA','1');
Insert into ROOT.PERSONA (ID_PERSONA,NOMBRE,APELLIDO,EMAIL,TELEFONO,DIRECCION,SISTEMA_PREVISION,PERSONA_ACTIVACION) values ('7','Pepota','Cachimbache','pepota@gmail.com','974521458','LosPepotas 01257','FONASA','1');
REM INSERTING into ROOT.REGISTRO_ACCIDENTE
SET DEFINE OFF;
Insert into ROOT.REGISTRO_ACCIDENTE (ID_REGISTRO_ACCIDENTE,FECHA_ACCIDENTE,CARGO_ACCIDENTADO,DESCRIPCION,USUARIO_ID_USUARIO,TIPO_ID_TIPO,PERSONA_ID_PERSONA,REGISTRO_ACCIDENTE_ACTIVACION) values ('1',to_date('16/07/2020','DD/MM/RRRR'),'Operario Bodega','Se callo jugand con la traspaleta','1','1','5','1');
Insert into ROOT.REGISTRO_ACCIDENTE (ID_REGISTRO_ACCIDENTE,FECHA_ACCIDENTE,CARGO_ACCIDENTADO,DESCRIPCION,USUARIO_ID_USUARIO,TIPO_ID_TIPO,PERSONA_ID_PERSONA,REGISTRO_ACCIDENTE_ACTIVACION) values ('2',to_date('11/07/2020','DD/MM/RRRR'),'Jefe Obra','No se puso el casco y se le cayo en la cabeza un palo','2','1','6','1');
Insert into ROOT.REGISTRO_ACCIDENTE (ID_REGISTRO_ACCIDENTE,FECHA_ACCIDENTE,CARGO_ACCIDENTADO,DESCRIPCION,USUARIO_ID_USUARIO,TIPO_ID_TIPO,PERSONA_ID_PERSONA,REGISTRO_ACCIDENTE_ACTIVACION) values ('3',to_date('06/07/2020','DD/MM/RRRR'),'Mesero','Se corto con la bandeja','3','3','7','1');
REM INSERTING into ROOT.ROLES
SET DEFINE OFF;
Insert into ROOT.ROLES (ID_ROL,NOMBRE_ROL,ROLES_ACTIVACION) values ('1','administracion','1');
Insert into ROOT.ROLES (ID_ROL,NOMBRE_ROL,ROLES_ACTIVACION) values ('2','empleado','1');
REM INSERTING into ROOT.TIPO
SET DEFINE OFF;
Insert into ROOT.TIPO (ID_TIPO,NOMBRE_TIPO,TIPO_ACTIVACION) values ('1','Golpe','1');
Insert into ROOT.TIPO (ID_TIPO,NOMBRE_TIPO,TIPO_ACTIVACION) values ('2','Químico','1');
Insert into ROOT.TIPO (ID_TIPO,NOMBRE_TIPO,TIPO_ACTIVACION) values ('3','Corte','1');
REM INSERTING into ROOT.USUARIO
SET DEFINE OFF;
Insert into ROOT.USUARIO (ID_USUARIO,NOMBRE_USUARIO,PASSWORD_USUARIO,ROLES_ID_ROL,PERSONA_ID_PERSONA,USUARIO_ACTIVACION) values ('1','user_carlos','admin','1','4','1');
Insert into ROOT.USUARIO (ID_USUARIO,NOMBRE_USUARIO,PASSWORD_USUARIO,ROLES_ID_ROL,PERSONA_ID_PERSONA,USUARIO_ACTIVACION) values ('2','user_javier','admin','1','3','1');
Insert into ROOT.USUARIO (ID_USUARIO,NOMBRE_USUARIO,PASSWORD_USUARIO,ROLES_ID_ROL,PERSONA_ID_PERSONA,USUARIO_ACTIVACION) values ('3','user_jose','admin','1','2','1');
Insert into ROOT.USUARIO (ID_USUARIO,NOMBRE_USUARIO,PASSWORD_USUARIO,ROLES_ID_ROL,PERSONA_ID_PERSONA,USUARIO_ACTIVACION) values ('4','user_rene','admin','1','1','1');
Insert into ROOT.USUARIO (ID_USUARIO,NOMBRE_USUARIO,PASSWORD_USUARIO,ROLES_ID_ROL,PERSONA_ID_PERSONA,USUARIO_ACTIVACION) values ('5','user_pepe','pepito123','2','5','1');
Insert into ROOT.USUARIO (ID_USUARIO,NOMBRE_USUARIO,PASSWORD_USUARIO,ROLES_ID_ROL,PERSONA_ID_PERSONA,USUARIO_ACTIVACION) values ('6','user_pepa','pepita123','2','6','1');
Insert into ROOT.USUARIO (ID_USUARIO,NOMBRE_USUARIO,PASSWORD_USUARIO,ROLES_ID_ROL,PERSONA_ID_PERSONA,USUARIO_ACTIVACION) values ('7','user_pepo','pepota123','2','7','1');
--------------------------------------------------------
--  DDL for Index TIPO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "ROOT"."TIPO_PK" ON "ROOT"."TIPO" ("ID_TIPO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index USUARIO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "ROOT"."USUARIO_PK" ON "ROOT"."USUARIO" ("ID_USUARIO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PERSONA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "ROOT"."PERSONA_PK" ON "ROOT"."PERSONA" ("ID_PERSONA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index ROLES_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "ROOT"."ROLES_PK" ON "ROOT"."ROLES" ("ID_ROL") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index REGISTRO_ACCIDENTE_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "ROOT"."REGISTRO_ACCIDENTE_PK" ON "ROOT"."REGISTRO_ACCIDENTE" ("ID_REGISTRO_ACCIDENTE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Trigger PERSONA_TRIGGER
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ROOT"."PERSONA_TRIGGER" BEFORE
    INSERT ON persona
    FOR EACH ROW
BEGIN
    :new.id_persona := SEQ_persona.nextval;
END;
/
ALTER TRIGGER "ROOT"."PERSONA_TRIGGER" ENABLE;
--------------------------------------------------------
--  DDL for Trigger REGISTRO_ACCIDENTE_TRIGGER
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ROOT"."REGISTRO_ACCIDENTE_TRIGGER" BEFORE
    INSERT ON registro_accidente
    FOR EACH ROW
BEGIN
    :new.id_registro_accidente := ACCIDENTE_ACCIDENTE.nextval;
END;
/
ALTER TRIGGER "ROOT"."REGISTRO_ACCIDENTE_TRIGGER" ENABLE;
--------------------------------------------------------
--  DDL for Trigger ROLES_TRIGGER
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ROOT"."ROLES_TRIGGER" BEFORE
    INSERT ON roles
    FOR EACH ROW
BEGIN
    :new.id_rol := SEQ_roles.nextval;
END;
/
ALTER TRIGGER "ROOT"."ROLES_TRIGGER" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TIPO_TRIGGER
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ROOT"."TIPO_TRIGGER" BEFORE
INSERT ON tipo
    FOR EACH ROW
BEGIN
    :new.id_tipo := SEQ_TIPO.nextval;
END;
/
ALTER TRIGGER "ROOT"."TIPO_TRIGGER" ENABLE;
--------------------------------------------------------
--  DDL for Trigger USUARIO_TRIGGER
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ROOT"."USUARIO_TRIGGER" BEFORE
    INSERT ON usuario
    FOR EACH ROW
BEGIN
    :new.id_usuario := SEQ_usuario.nextval;
END;
/
ALTER TRIGGER "ROOT"."USUARIO_TRIGGER" ENABLE;
--------------------------------------------------------
--  DDL for Function CUSTOM_AUTH
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ROOT"."CUSTOM_AUTH" (p_username in VARCHAR2, p_password in VARCHAR2)
return BOOLEAN
is
  l_password varchar2(4000);
  l_stored_password varchar2(4000);
  l_expires_on date;
  l_count number;
begin
-- First, check to see if the user is in the user table
select count(*) into l_count from demo_users where user_name = p_username;
if l_count > 0 then
  -- First, we fetch the stored hashed password & expire date
  select password, expires_on into l_stored_password, l_expires_on
   from demo_users where user_name = p_username;

  -- Next, we check to see if the user's account is expired
  -- If it is, return FALSE
  if l_expires_on > sysdate or l_expires_on is null then

    -- If the account is not expired, we have to apply the custom hash
    -- function to the password
    l_password := custom_hash(p_username, p_password);

    -- Finally, we compare them to see if they are the same and return
    -- either TRUE or FALSE
    if l_password = l_stored_password then
      return true;
    else
      return false;
    end if;
  else
    return false;
  end if;
else
  -- The username provided is not in the DEMO_USERS table
  return false;
end if;
end;

/
--------------------------------------------------------
--  DDL for Function CUSTOM_HASH
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ROOT"."CUSTOM_HASH" (p_username in varchar2, p_password in varchar2)
return varchar2
is
  l_password varchar2(4000);
  l_salt varchar2(4000) := 'F2D4FWG76TLNT857SPYHL21MRGPOM4';
begin

-- This function should be wrapped, as the hash algorhythm is exposed here.
-- You can change the value of l_salt or the method of which to call the
-- DBMS_OBFUSCATOIN toolkit, but you much reset all of your passwords
-- if you choose to do this.

l_password := utl_raw.cast_to_raw(dbms_obfuscation_toolkit.md5
  (input_string => p_password || substr(l_salt,10,13) || p_username ||
    substr(l_salt, 4,10)));
return l_password;
end;

/
--------------------------------------------------------
--  Constraints for Table USUARIO
--------------------------------------------------------

  ALTER TABLE "ROOT"."USUARIO" ADD CONSTRAINT "USUARIO_PK" PRIMARY KEY ("ID_USUARIO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ROOT"."USUARIO" MODIFY ("USUARIO_ACTIVACION" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."USUARIO" MODIFY ("PERSONA_ID_PERSONA" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."USUARIO" MODIFY ("ROLES_ID_ROL" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."USUARIO" MODIFY ("PASSWORD_USUARIO" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."USUARIO" MODIFY ("NOMBRE_USUARIO" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."USUARIO" MODIFY ("ID_USUARIO" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table TIPO
--------------------------------------------------------

  ALTER TABLE "ROOT"."TIPO" ADD CONSTRAINT "TIPO_PK" PRIMARY KEY ("ID_TIPO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ROOT"."TIPO" MODIFY ("TIPO_ACTIVACION" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."TIPO" MODIFY ("NOMBRE_TIPO" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."TIPO" MODIFY ("ID_TIPO" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table REGISTRO_ACCIDENTE
--------------------------------------------------------

  ALTER TABLE "ROOT"."REGISTRO_ACCIDENTE" ADD CONSTRAINT "REGISTRO_ACCIDENTE_PK" PRIMARY KEY ("ID_REGISTRO_ACCIDENTE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ROOT"."REGISTRO_ACCIDENTE" MODIFY ("REGISTRO_ACCIDENTE_ACTIVACION" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."REGISTRO_ACCIDENTE" MODIFY ("PERSONA_ID_PERSONA" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."REGISTRO_ACCIDENTE" MODIFY ("TIPO_ID_TIPO" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."REGISTRO_ACCIDENTE" MODIFY ("USUARIO_ID_USUARIO" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."REGISTRO_ACCIDENTE" MODIFY ("CARGO_ACCIDENTADO" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."REGISTRO_ACCIDENTE" MODIFY ("FECHA_ACCIDENTE" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."REGISTRO_ACCIDENTE" MODIFY ("ID_REGISTRO_ACCIDENTE" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table ROLES
--------------------------------------------------------

  ALTER TABLE "ROOT"."ROLES" ADD CONSTRAINT "ROLES_PK" PRIMARY KEY ("ID_ROL")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ROOT"."ROLES" MODIFY ("ROLES_ACTIVACION" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."ROLES" MODIFY ("NOMBRE_ROL" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."ROLES" MODIFY ("ID_ROL" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table PERSONA
--------------------------------------------------------

  ALTER TABLE "ROOT"."PERSONA" ADD CONSTRAINT "PERSONA_PK" PRIMARY KEY ("ID_PERSONA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ROOT"."PERSONA" MODIFY ("PERSONA_ACTIVACION" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."PERSONA" MODIFY ("SISTEMA_PREVISION" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."PERSONA" MODIFY ("DIRECCION" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."PERSONA" MODIFY ("TELEFONO" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."PERSONA" MODIFY ("APELLIDO" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."PERSONA" MODIFY ("NOMBRE" NOT NULL ENABLE);
  ALTER TABLE "ROOT"."PERSONA" MODIFY ("ID_PERSONA" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table REGISTRO_ACCIDENTE
--------------------------------------------------------

  ALTER TABLE "ROOT"."REGISTRO_ACCIDENTE" ADD CONSTRAINT "REGISTRO_ACCIDENTE_PERSONA_FK" FOREIGN KEY ("PERSONA_ID_PERSONA")
	  REFERENCES "ROOT"."PERSONA" ("ID_PERSONA") ENABLE;
  ALTER TABLE "ROOT"."REGISTRO_ACCIDENTE" ADD CONSTRAINT "REGISTRO_ACCIDENTE_TIPO_FK" FOREIGN KEY ("TIPO_ID_TIPO")
	  REFERENCES "ROOT"."TIPO" ("ID_TIPO") ENABLE;
  ALTER TABLE "ROOT"."REGISTRO_ACCIDENTE" ADD CONSTRAINT "REGISTRO_ACCIDENTE_USUARIO_FK" FOREIGN KEY ("USUARIO_ID_USUARIO")
	  REFERENCES "ROOT"."USUARIO" ("ID_USUARIO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table USUARIO
--------------------------------------------------------

  ALTER TABLE "ROOT"."USUARIO" ADD CONSTRAINT "USUARIO_PERSONA_FK" FOREIGN KEY ("PERSONA_ID_PERSONA")
	  REFERENCES "ROOT"."PERSONA" ("ID_PERSONA") ENABLE;
  ALTER TABLE "ROOT"."USUARIO" ADD CONSTRAINT "USUARIO_ROLES_FK" FOREIGN KEY ("ROLES_ID_ROL")
	  REFERENCES "ROOT"."ROLES" ("ID_ROL") ENABLE;
